<Window x:Class="Billapong.MapEditor.Views.MapEditView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewModel="clr-namespace:Billapong.MapEditor.ViewModels"
        Title="MapEdit" Height="705" Width="838" Name="MapEditWindow" ResizeMode="NoResize">

    <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <DockPanel Margin="10">
                <TextBlock DockPanel.Dock="Left">Name:</TextBlock>
                <Button DockPanel.Dock="Right" Command="{Binding SaveCommand}" Content="Save" Padding="5,1,5,1" />
                <TextBox Margin="10,0,10,0" Text="{Binding MapName}" />
            </DockPanel>

            <Border BorderThickness="1" BorderBrush="Black" Margin="10">
                <ItemsControl ItemsSource="{Binding GameWindows}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ItemsControl ItemsSource="{Binding}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid>
                                        
                                            <Border BorderThickness="1" BorderBrush="Black" Margin="-1">
                                                <Canvas Width="{x:Static viewModel:MapEditViewModel.GameWindowSize}" Height="{x:Static viewModel:MapEditViewModel.GameWindowSize}" Background="{Binding Background}">
                                                    <Canvas.InputBindings>
                                                        <MouseBinding MouseAction="LeftClick" CommandParameter="{Binding}" Command="{Binding ElementName=MapEditWindow, Path=DataContext.ToggleWindowCommand}" />
                                                    </Canvas.InputBindings>
                                                </Canvas>
                                            </Border>

                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Border>
            
        </StackPanel>
    </ScrollViewer>

</Window>
